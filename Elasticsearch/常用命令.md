# 常用命令


```shell
#查看集群的健康状态
curl 'localhost:9200/_cat/health?v'
#    status字段有三个状态值，分别为green、yellow、red
#    1 绿色，最健康的状态，代表所有的分片包括备份都可用
#    2 黄色，基本的分片可用，但是备份不可用（也可能是没有备份）
#    3 红色，部分的分片可用，表明分片有一部分损坏。此时执行查询部分数据仍然可以查到，遇到这种情况，还是赶快解决比较好。

#查看节点列表
curl 'localhost:9200/_cat/nodes?v'

#查看所有索引
curl 'localhost:9200/_cat/indices?v'

#查看索引详细
curl 'localhost:9200/filebeat-2018.09.07/_search?q=*&pretty'

# 创建索引，索引名为customer
curl -XPUT 'localhost:9200/customer?pretty'

# 插入数据，指定类型external
curl -XPUT 'localhost:9200/zhy-test-20180912/external/1?pretty' -d '
{
  "name": "John Doe"
}'

查询数据
curl -XGET 'localhost:9200/zhy-test-20180912/external/1?pretty'
# {
#  "_index" : "zhy-test-20180912",
#  "_type" : "external",
#  "_id" : "1",
#  "_version" : 1,
#  "found" : true,
#  "_source" : {
#    "name" : "John Doe"
#  }
#}
# 1 found 描述了请求信息
# 2 _source 为之前索引时的数据

# 删除索引
curl -XDELETE 'localhost:9200/zhy-test-20180912'


#  curl -X GET 'http://localhost:9200/_cluster/health?pretty'
#  curl -XPUT "http://localhost:9200/_settings" -d' {  "number_of_replicas" : 0 } '
#  curl -XPUT "http://localhost:9200/_all/_settings" -d' { "index" : {   "number_of_replicas" : 0 }  }'


# 创建模板filebeat-*, 并设置rep为0
### 如果要修改已有的模板，应该先获取模板的json文件，然后再进行修改，否则执行put会覆盖原有的模板
### post 进行更新 ？？？
curl -XPUT 'localhost:9200/_template/logstash_template' -d '
{
"template" : "filebeat-*",
"settings" : {"number_of_replicas" : 0 }
} '

curl -XPUT 'localhost:9200/_template/filebeat' -d '
{
"template" : "filebeat-*",
"settings" : {"number_of_replicas" : 0 }
} '

# 创建索引，确认模板设置是否成功（查看索引，rep确实为0）
curl -XPUT 'localhost:9200/filebeat-2018.01.09.2/external/1?pretty' -d '
{
  "name": "John sss"
}'


```




